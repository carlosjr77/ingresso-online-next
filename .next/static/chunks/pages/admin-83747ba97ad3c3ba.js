(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{8496:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(3204)}])},3204:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return m}});var a=r(5893),t=r(7294),o=r(3977),i=r(2370),l=r(9828);let s=("undefined"!=typeof __app_id?__app_id:"default-app-id").replace(/\//g,"_"),d="undefined"!=typeof __firebase_config?JSON.parse(__firebase_config):{},c="undefined"!=typeof __initial_auth_token?__initial_auth_token:null,p=(0,o.ZF)(d),u=(0,l.ad)(p),b=(0,i.v0)(p);function m(){let[n,e]=(0,t.useState)([]),[r,o]=(0,t.useState)(!0),[d,p]=(0,t.useState)(null),[m,h]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let n=()=>{};return async function(){try{c?await (0,i._p)(b,c):await (0,i.XB)(b)}catch(n){console.error("Auth failed:",n)}}(),n=(0,i.Aj)(b,n=>{n&&p(n.uid),h(!0)}),()=>n()},[]),(0,t.useEffect)(()=>{if(!m||!d)return;console.log("Starting Firestore subscription for UID:",d);let n=(0,l.hJ)(u,"artifacts/".concat(s,"/users/").concat(d,"/orders")),r=(0,l.cf)((0,l.IO)(n),n=>{e(n.docs.map(n=>({id:n.id,...n.data(),timestamp:n.data().timestamp?n.data().timestamp.toDate().toLocaleString("pt-BR"):"N/A"}))),o(!1)},n=>{console.error("Firestore subscription failed:",n),o(!1)});return()=>r()},[m,d]);let f=n=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n),x=n.reduce((n,e)=>n+(e.profitMargin||0),0);return r||!m?(0,a.jsxs)("div",{className:"loadingContainer",children:[(0,a.jsx)("div",{className:"spinner"}),(0,a.jsx)("h1",{className:"loadingTitle",children:"Carregando Painel de Administra\xe7\xe3o..."}),(0,a.jsx)("p",{className:"loadingText",children:"Conectando ao Firebase em tempo real."})]}):(0,a.jsxs)("div",{className:"adminContainer",children:[(0,a.jsx)("h1",{className:"adminTitle",children:"Painel de Administra\xe7\xe3o Premier Pass"}),(0,a.jsxs)("p",{className:"adminSubtitle",children:["Leads capturados em tempo real (Total de Lucro Pendente:",(0,a.jsx)("span",{className:"profitHighlight",children:f(x)}),")"]}),(0,a.jsxs)("p",{className:"userIdDisplay",children:["Seu ID de Usu\xe1rio para Pedidos (Refer\xeancia do Firestore): ",d||"Aguardando autentica\xe7\xe3o..."]}),0===n.length?(0,a.jsx)("div",{className:"noOrdersMessage",children:(0,a.jsx)("p",{children:"Nenhum pedido de ingresso capturado ainda. Compartilhe o link do seu site!"})}):(0,a.jsx)("div",{className:"ordersTableContainer",children:(0,a.jsxs)("table",{className:"ordersTable",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID Pedido"}),(0,a.jsx)("th",{children:"Data/Hora"}),(0,a.jsx)("th",{children:"Evento"}),(0,a.jsx)("th",{children:"Cliente"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Qtd."}),(0,a.jsx)("th",{children:"Lucro (5%)"}),(0,a.jsx)("th",{children:"A\xe7\xe3o"})]})}),(0,a.jsx)("tbody",{children:n.map(n=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{"data-label":"ID Pedido",children:[n.id.substring(0,8),"..."]}),(0,a.jsx)("td",{"data-label":"Data/Hora",children:n.timestamp}),(0,a.jsx)("td",{"data-label":"Evento",className:"eventName",children:n.eventName}),(0,a.jsxs)("td",{"data-label":"Cliente",children:[n.customer.name,(0,a.jsx)("br",{}),(0,a.jsx)("small",{children:n.customer.email})]}),(0,a.jsx)("td",{"data-label":"Status",children:(0,a.jsx)("span",{className:"statusTag status-".concat(n.status.toLowerCase()),children:n.status.replace("_"," ")})}),(0,a.jsx)("td",{"data-label":"Qtd.",children:n.quantity}),(0,a.jsx)("td",{"data-label":"Lucro",className:"profitMargin",children:f(n.profitMargin)}),(0,a.jsx)("td",{"data-label":"A\xe7\xe3o",children:(0,a.jsx)("a",{href:n.symplaUrl,target:"_blank",rel:"noopener noreferrer",className:"actionButton",children:"Completar Sympla â†’"})})]},n.id))})]})}),(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n        :root {\n            --accent-color: #00bcd4;\n            --text-color: #e0e0e0;\n            --bg-color: #121212;\n            --card-bg: #1f1f1f;\n            --border-color: #333;\n            --success-color: #4CAF50;\n            --pending-color: #FFC107;\n        }\n\n        /* Layout Geral */\n        .adminContainer {\n            max-width: 1400px;\n            margin: 0 auto;\n            padding: 4rem 1rem;\n            min-height: 100vh;\n            background-color: var(--bg-color);\n            color: var(--text-color);\n        }\n        .adminTitle {\n            font-size: 2.5rem;\n            font-weight: 800;\n            margin-bottom: 0.5rem;\n            color: var(--accent-color);\n        }\n        .adminSubtitle {\n            font-size: 1.1rem;\n            color: #aaa;\n            margin-bottom: 2rem;\n        }\n        .profitHighlight {\n            color: var(--success-color);\n            font-weight: bold;\n            margin-left: 8px;\n        }\n        .userIdDisplay {\n            margin-top: 30px;\n            font-size: 0.8rem;\n            color: #555;\n        }\n\n        /* Tabela de Pedidos */\n        .ordersTableContainer {\n            overflow-x: auto;\n            border-radius: 8px;\n            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);\n        }\n        .ordersTable {\n            width: 100%;\n            border-collapse: collapse;\n            min-width: 800px; /* Garante que a tabela n\xe3o seja muito espremida em telas menores */\n        }\n\n        .ordersTable th, .ordersTable td {\n            padding: 15px;\n            text-align: left;\n            border-bottom: 1px solid var(--border-color);\n        }\n\n        .ordersTable th {\n            background-color: #282828;\n            color: var(--accent-color);\n            font-weight: 600;\n            text-transform: uppercase;\n            font-size: 0.9rem;\n        }\n\n        .ordersTable td {\n            background-color: var(--card-bg);\n            color: var(--text-color);\n            vertical-align: top;\n            font-size: 0.95rem;\n        }\n        \n        .ordersTable tr:hover td {\n            background-color: #252525;\n        }\n\n        .eventName {\n            font-weight: 600;\n            color: #fff;\n        }\n\n        .profitMargin {\n            font-weight: bold;\n            color: var(--success-color);\n        }\n\n        /* Tags de Status */\n        .statusTag {\n            display: inline-block;\n            padding: 4px 8px;\n            border-radius: 4px;\n            font-size: 0.75rem;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .status-pending_fulfillment {\n            background-color: var(--pending-color);\n            color: #333;\n        }\n        .status-fulfilled { /* Se voc\xea adicionar l\xf3gica de "cumprido" */\n            background-color: var(--success-color);\n            color: #fff;\n        }\n\n        /* Bot\xe3o de A\xe7\xe3o */\n        .actionButton {\n            display: inline-block;\n            padding: 8px 12px;\n            background-color: #5c6bc0;\n            color: #fff;\n            text-decoration: none;\n            border-radius: 4px;\n            font-size: 0.85rem;\n            font-weight: 600;\n            transition: background-color 0.3s;\n        }\n        .actionButton:hover {\n            background-color: #7986cb;\n        }\n        \n        .noOrdersMessage {\n            padding: 40px;\n            text-align: center;\n            background-color: #282828;\n            border-radius: 8px;\n            border: 1px solid var(--accent-color);\n            color: #fff;\n        }\n\n        /* Responsividade para Tabelas (Mobile) */\n        @media (max-width: 768px) {\n            .ordersTable, .ordersTable thead, .ordersTable tbody, .ordersTable th, .ordersTable td, .ordersTable tr {\n                display: block;\n            }\n\n            .ordersTable thead tr {\n                position: absolute;\n                top: -9999px;\n                left: -9999px;\n            }\n\n            .ordersTable tr {\n                margin-bottom: 15px;\n                border: 1px solid var(--accent-color);\n                border-radius: 8px;\n                overflow: hidden;\n            }\n\n            .ordersTable td {\n                border: none;\n                position: relative;\n                padding-left: 50%; \n                text-align: right;\n            }\n\n            .ordersTable td:before {\n                content: attr(data-label);\n                position: absolute;\n                left: 10px;\n                width: 45%; \n                padding-right: 10px;\n                white-space: nowrap;\n                text-align: left;\n                font-weight: bold;\n                color: var(--accent-color);\n            }\n\n            .adminTitle { font-size: 2rem; }\n        }\n    '}})]})}}},function(n){n.O(0,[16,551,908,888,774,179],function(){return n(n.s=8496)}),_N_E=n.O()}]);